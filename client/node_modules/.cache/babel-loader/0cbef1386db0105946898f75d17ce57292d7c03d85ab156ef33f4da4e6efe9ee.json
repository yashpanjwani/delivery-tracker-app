{"ast":null,"code":"import _objectSpread from\"C:/Users/Yash/Desktop/delivery-tracker-app/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";// src/OrderList.jsimport { collection, onSnapshot, doc, updateDoc } from \"firebase/firestore\";\nimport React,{useEffect,useState}from\"react\";import axios from\"axios\";import{collection,onSnapshot,getDocs,query,doc,updateDoc}from\"firebase/firestore\";import{db}from\"./firebaseClient\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const OrderList=()=>{const[orders,setOrders]=useState([]);const[loading,setLoading]=useState(true);async function testFirestoreConnection(){console.log(\"üì° Testing Firestore connection...\");try{const querySnapshot=await getDocs(collection(db,\"orders\"));if(querySnapshot.empty){console.warn(\"‚ö†Ô∏è No documents found in 'orders' collection!\");}else{querySnapshot.forEach(doc=>{console.log(\"üî• Order:\",doc.id,doc.data());});}}catch(error){console.error(\"‚ùå Firestore error:\",error);}}testFirestoreConnection();// Fetch orders from server\nuseEffect(()=>{console.log(\"üîÑ Setting up Firestore live listener...\");const unsubscribe=onSnapshot(collection(db,\"orders\"),snapshot=>{const ordersData=snapshot.docs.map(doc=>_objectSpread({id:doc.id},doc.data()));console.log(\"üì° Live update received:\",ordersData);setOrders(ordersData);setLoading(false);});return()=>{console.log(\"üõë Unsubscribing Firestore listener\");unsubscribe();};},[]);// Update order status on server, then refresh local list\nconst updateStatus=async(id,newStatus)=>{try{const ref=doc(db,\"orders\",id);await updateDoc(ref,{status:newStatus});console.log(\"üî• Status updated in Firestore:\",newStatus);}catch(err){console.error(\"‚ùå Error updating Firestore:\",err);}};if(loading)return/*#__PURE__*/_jsx(\"p\",{children:\"Loading orders...\"});return/*#__PURE__*/_jsx(\"div\",{children:orders.length===0?/*#__PURE__*/_jsx(\"p\",{children:\"No orders yet.\"}):orders.map(order=>/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:\"10px\"},children:[/*#__PURE__*/_jsx(\"b\",{children:order.name}),\" ordered \",/*#__PURE__*/_jsx(\"b\",{children:order.item}),\"\\u2014\",\" \",/*#__PURE__*/_jsxs(\"select\",{value:order.status,onChange:e=>updateStatus(order.id,e.target.value),style:{marginRight:\"8px\"},children:[/*#__PURE__*/_jsx(\"option\",{value:\"Accepted\",children:\"Accepted\"}),/*#__PURE__*/_jsx(\"option\",{value:\"On the way\",children:\"On the way\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Delivered\",children:\"Delivered\"})]}),/*#__PURE__*/_jsx(\"span\",{className:\"status \".concat(order.status.toLowerCase().replace(/\\s/g,\"-\")),children:order.status})]},order.id))});};export default OrderList;","map":{"version":3,"names":["React","useEffect","useState","axios","collection","onSnapshot","getDocs","query","doc","updateDoc","db","jsx","_jsx","jsxs","_jsxs","OrderList","orders","setOrders","loading","setLoading","testFirestoreConnection","console","log","querySnapshot","empty","warn","forEach","id","data","error","unsubscribe","snapshot","ordersData","docs","map","_objectSpread","updateStatus","newStatus","ref","status","err","children","length","order","style","marginBottom","name","item","value","onChange","e","target","marginRight","className","concat","toLowerCase","replace"],"sources":["C:/Users/Yash/Desktop/delivery-tracker-app/client/src/OrderList.js"],"sourcesContent":["// src/OrderList.jsimport { collection, onSnapshot, doc, updateDoc } from \"firebase/firestore\";\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nimport React, { useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport { collection, onSnapshot ,getDocs, query,doc, updateDoc} from \"firebase/firestore\";\r\nimport { db } from \"./firebaseClient\";\r\n\r\nconst OrderList = () => {\r\n  const [orders, setOrders] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n\r\nasync function testFirestoreConnection() {\r\n  console.log(\"üì° Testing Firestore connection...\");\r\n  try {\r\n    const querySnapshot = await getDocs(collection(db, \"orders\"));\r\n    if (querySnapshot.empty) {\r\n      console.warn(\"‚ö†Ô∏è No documents found in 'orders' collection!\");\r\n    } else {\r\n      querySnapshot.forEach((doc) => {\r\n        console.log(\"üî• Order:\", doc.id, doc.data());\r\n      });\r\n    }\r\n  } catch (error) {\r\n    console.error(\"‚ùå Firestore error:\", error);\r\n  }\r\n}\r\ntestFirestoreConnection();\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n  // Fetch orders from server\r\n \r\n  \r\n  \r\n\r\n useEffect(() => {\r\n  console.log(\"üîÑ Setting up Firestore live listener...\");\r\n\r\n  const unsubscribe = onSnapshot(collection(db, \"orders\"), (snapshot) => {\r\n    const ordersData = snapshot.docs.map((doc) => ({\r\n      id: doc.id,\r\n      ...doc.data(),\r\n    }));\r\n\r\n    console.log(\"üì° Live update received:\", ordersData);\r\n    setOrders(ordersData);\r\n    setLoading(false);\r\n  });\r\n\r\n  return () => {\r\n    console.log(\"üõë Unsubscribing Firestore listener\");\r\n    unsubscribe();\r\n  };\r\n}, []);\r\n\r\n\r\n\r\n\r\n\r\n  // Update order status on server, then refresh local list\r\n const updateStatus = async (id, newStatus) => {\r\n  try {\r\n    const ref = doc(db, \"orders\", id);\r\n    await updateDoc(ref, { status: newStatus });\r\n\r\n    console.log(\"üî• Status updated in Firestore:\", newStatus);\r\n  } catch (err) {\r\n    console.error(\"‚ùå Error updating Firestore:\", err);\r\n  }\r\n};\r\n\r\n\r\n  if (loading) return <p>Loading orders...</p>;\r\n\r\n  return (\r\n    <div>\r\n      {orders.length === 0 ? (\r\n        <p>No orders yet.</p>\r\n      ) : (\r\n        orders.map((order) => (\r\n          <div key={order.id} style={{ marginBottom: \"10px\" }}>\r\n            <b>{order.name}</b> ordered <b>{order.item}</b>\r\n ‚Äî{\" \"}\r\n            <select\r\n              value={order.status}\r\n              onChange={(e) => updateStatus(order.id, e.target.value)}\r\n              style={{ marginRight: \"8px\" }}\r\n            >\r\n              <option value=\"Accepted\">Accepted</option>\r\n              <option value=\"On the way\">On the way</option>\r\n              <option value=\"Delivered\">Delivered</option>\r\n            </select>\r\n\r\n            <span className={`status ${order.status.toLowerCase().replace(/\\s/g, \"-\")}`}>\r\n              {order.status}\r\n            </span>\r\n          </div>\r\n        ))\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default OrderList;\r\n\r\n\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}